---
import { Icon } from "astro-icon/components";

// Tally form configuration
const tallyConfig = {
  formId: "3l0ykX",
  options: {
    hideTitle: false,
    alignLeft: false,
    transparentBackground: true,
    dynamicHeight: true
  }
};

const contactInfo = {
  phone: "+1 (555) 123-4567",
  email: "quotes@company.com",
  responseTime: "Within 24 hours"
};
---

<section class="py-20 bg-gray-50 dark:bg-gray-800/50">
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold mb-4" data-aos="fade-up">Request for Quote</h2>
        <p class="text-gray-600 dark:text-gray-400" data-aos="fade-up" data-aos-delay="100">
          Get a detailed quote for your manufacturing and fabrication needs
        </p>
      </div>

      <!-- Tally Form Embed -->
      <div 
        class="bg-white dark:bg-gray-900 rounded-2xl p-8 shadow-lg"
        data-aos="fade-up"
      >
        <iframe
          src={`https://tally.so/embed/${tallyConfig.formId}`}
          width="100%"
          height="500"
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          title="Request for Quote"
        ></iframe>
      </div>

      <!-- Contact Information -->
      <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="flex items-center space-x-4">
          <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg">
            <Icon name="ph:phone-bold" class="w-6 h-6 text-blue-600 dark:text-blue-400" />
          </div>
          <div>
            <h3 class="font-medium">Phone</h3>
            <p class="text-gray-600 dark:text-gray-400">{contactInfo.phone}</p>
          </div>
        </div>

        <div class="flex items-center space-x-4">
          <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg">
            <Icon name="ph:envelope-bold" class="w-6 h-6 text-blue-600 dark:text-blue-400" />
          </div>
          <div>
            <h3 class="font-medium">Email</h3>
            <p class="text-gray-600 dark:text-gray-400">{contactInfo.email}</p>
          </div>
        </div>

        <div class="flex items-center space-x-4">
          <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg">
            <Icon name="ph:clock-bold" class="w-6 h-6 text-blue-600 dark:text-blue-400" />
          </div>
          <div>
            <h3 class="font-medium">Response Time</h3>
            <p class="text-gray-600 dark:text-gray-400">{contactInfo.responseTime}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Tally Script -->
<script is:inline>
  // Load Tally Script
  (function(d){
    var s = d.createElement("script");
    s.setAttribute("data-tally-script", "true");
    s.src = "https://tally.so/widgets/embed.js";
    s.defer = true;
    d.body.appendChild(s);
  })(document);
</script>

<script>
  // Type-safe configuration
  declare global {
    interface Window {
      TallyConfig?: TallyConfig;
      Tally?: TallyAPI;
    }
  }

  window.TallyConfig = {
    formId: 'YOUR_TALLY_FORM_ID',
    popup: {
      width: 900,
      emoji: 'ðŸ‘‹',
      autoOpen: false,
      openOnExit: false,
      openOnDelay: false,
      hideName: false
    }
  };
</script> 
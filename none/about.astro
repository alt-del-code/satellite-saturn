---
import Layout from '@/layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';

interface Value {
  title: string;
  description: string;
  icon: string;
}

interface Stat {
  value: string;
  label: string;
  description: string;
}

interface TeamMember {
  name: string;
  position: string;
  bio: string;
  image: string;
}

interface Certification {
  name: string;
  issuer: string;
  year: string;
  image: string;
}

// Get the first about page entry
const aboutEntries = await getCollection('about');
const mainAbout = aboutEntries[0];

if (!mainAbout) {
  throw new Error('About page content not found');
}

const { Content } = await mainAbout.render();
const data = mainAbout.data;
---

<Layout 
  title={data.meta.title} 
  description={data.meta.description}
>
  <main class="overflow-hidden">
    <!-- Hero Section with gradient background -->
    <section class="py-16 bg-gradient-to-b from-primary-100 to-white dark:from-dark-bg-soft dark:to-dark-bg">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-16" data-aos="fade-up">
          <h1 class="text-4xl md:text-5xl font-bold text-primary-900 dark:text-gray-50 mb-4">{data.title}</h1>
          <p class="text-xl text-primary-700 dark:text-gray-200 mb-6">{data.subtitle}</p>
          <p class="text-lg text-gray-600 dark:text-gray-300 max-w-4xl mx-auto">{data.intro}</p>
        </div>

        <!-- Vision & Mission -->
        <div class="grid md:grid-cols-2 gap-8 mb-16">
          <div 
            class="bg-white/80 dark:bg-dark-surface-soft/90 p-8 rounded-lg shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105"
            data-aos="fade-right"
          >
            <h2 class="text-2xl font-bold text-primary-800 dark:text-primary-300 mb-4">Our Vision</h2>
            <p class="text-gray-600 dark:text-gray-300 text-lg">{data.vision}</p>
          </div>
          <div 
            class="bg-white/80 dark:bg-dark-surface-soft/90 p-8 rounded-lg shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105"
            data-aos="fade-left"
          >
            <h2 class="text-2xl font-bold text-primary-800 dark:text-primary-300 mb-4">Our Mission</h2>
            <p class="text-gray-600 dark:text-gray-300 text-lg">{data.mission}</p>
          </div>
        </div>

        <!-- Core Values -->
        {data.values && (
          <div class="mb-16" data-aos="fade-up">
            <h2 class="text-3xl font-bold text-primary-900 dark:text-gray-50 mb-8 text-center">Our Core Values</h2>
            <div class="grid md:grid-cols-3 gap-8">
              {data.values.map((value: Value) => (
                <div class="bg-white/80 dark:bg-dark-surface-soft/90 p-8 rounded-lg shadow-lg backdrop-blur-sm transition-all duration-300 hover:scale-105">
                  <div class="flex justify-center mb-4">
                    <div class="bg-primary-500/25 backdrop-blur-sm p-4 rounded-lg">
                      <Icon name={value.icon} class="w-8 h-8 text-primary-600 dark:text-primary-400" />
                    </div>
                  </div>
                  <h3 class="text-xl font-semibold text-primary-800 dark:text-primary-300 mb-3 text-center">{value.title}</h3>
                  <p class="text-gray-600 dark:text-gray-300 text-center">{value.description}</p>
                </div>
              ))}
            </div>
          </div>
        )}

        <!-- Stats -->
        {data.stats && (
          <div class="bg-white/80 dark:bg-dark-surface-soft/90 py-12 px-4 mb-16 rounded-lg shadow-lg backdrop-blur-sm" data-aos="fade-up">
            <div class="grid md:grid-cols-4 gap-8">
              {data.stats.map((stat: Stat) => (
                <div class="text-center group">
                  <div class="text-4xl font-bold text-primary-800 dark:text-primary-300 mb-2 transition-colors group-hover:text-primary-700 dark:group-hover:text-primary-200 counter-animate">
                    {stat.value}
                  </div>
                  <div class="text-lg font-semibold text-primary-700 dark:text-gray-200 mb-1">{stat.label}</div>
                  <p class="text-gray-600 dark:text-gray-300">{stat.description}</p>
                </div>
              ))}
            </div>
          </div>
        )}

        <!-- Team -->
        {data.team && (
          <div class="mb-16" data-aos="fade-up">
            <h2 class="text-3xl font-bold text-primary-900 dark:text-gray-50 mb-8 text-center">Our Leadership Team</h2>
            <div class="grid md:grid-cols-3 gap-8">
              {data.team.map((member: TeamMember) => (
                <div class="bg-white/80 dark:bg-dark-surface-soft/90 rounded-lg shadow-lg overflow-hidden transition-all duration-300 hover:scale-105 backdrop-blur-sm">
                  <div class="aspect-w-4 aspect-h-3">
                    <Image
                      src={member.image}
                      alt={member.name}
                      width={400}
                      height={300}
                      class="w-full h-full object-cover"
                    />
                  </div>
                  <div class="p-6">
                    <h3 class="text-xl font-semibold text-primary-800 dark:text-primary-300 mb-2">{member.name}</h3>
                    <div class="text-primary-600 dark:text-primary-400 mb-3">{member.position}</div>
                    <p class="text-gray-600 dark:text-gray-300">{member.bio}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        <!-- Certifications -->
        {data.certifications && (
          <div class="bg-white/80 dark:bg-dark-surface-soft/90 py-12 px-4 rounded-lg shadow-lg backdrop-blur-sm" data-aos="fade-up">
            <h2 class="text-3xl font-bold text-primary-900 dark:text-gray-50 mb-8 text-center">Our Certifications</h2>
            <div class="grid md:grid-cols-4 gap-8">
              {data.certifications.map((cert: Certification) => (
                <div class="bg-white dark:bg-dark-surface p-6 rounded-lg shadow-lg text-center transition-all duration-300 hover:scale-105">
                  <div class="mb-4 h-32 flex items-center justify-center">
                    <Image
                      src={cert.image}
                      alt={cert.name}
                      width={120}
                      height={120}
                      class="max-h-full w-auto object-contain"
                    />
                  </div>
                  <h3 class="text-lg font-semibold text-primary-800 dark:text-primary-300 mb-2">{cert.name}</h3>
                  <div class="text-gray-600 dark:text-gray-300">
                    <div>{cert.issuer}</div>
                    <div>{cert.year}</div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        <!-- MDX Content -->
        <div class="prose prose-lg dark:prose-invert mx-auto mt-8">
          <Content />
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  @keyframes fade-in {
    from { 
      opacity: 0;
      transform: translateY(20px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }

  .counter-animate {
    animation: pulse 0.6s ease-in-out;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  /* Ensure images in MDX content are responsive */
  :global(.prose img) {
    @apply rounded-lg shadow-md;
  }
</style>
--- 